<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shorts Crafter — MBCC</title>
  <meta name="description" content="Extract high-energy 15–45s clips from transcripts; auto-generate captions (SRT).">
  <link rel="stylesheet" href="assets/style.css">
  <script defer src="assets/js/adsense-init.js"></script>
  <style>
    .hero{background:#0b0b0b;padding:16px 0;border-bottom:1px solid #222}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:12px} @media(max-width:920px){.two{grid-template-columns:1fr}}
    textarea.input{min-height:160px}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, monospace; white-space:pre-wrap}
    .tiny{opacity:.9}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
  </style>
</head>
<body>
  <header class="header"><div class="container header-row">
    <div class="brand"><div class="logo"></div><h1>Shorts Crafter</h1></div>
    <nav class="nav"><a href="index.html">Home</a><a href="apps.html" class="active">Apps</a></nav>
  </div></header>

  <section class="hero"><div class="container"><p class="tiny">Heuristics: numbers, conflict, payoffs, imperatives → 15–45s segments.</p></div></section>

  <main class="container" style="margin-top:12px">
    <section class="card">
      <div class="badge">Transcript</div>
      <div class="two">
        <textarea id="script" class="input" placeholder="Paste raw transcript (no timestamps needed)."></textarea>
        <div>
          <label class="tiny">Target length (seconds)</label>
          <input id="minS" type="number" class="input" value="18">
          <input id="maxS" type="number" class="input" value="42" style="margin-top:6px">
          <label class="tiny">Words/second estimate</label>
          <input id="wps" type="number" class="input" value="2.6">
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
            <button class="btn" onclick="sc.find()">Find clips</button>
            <button class="btn alt" onclick="sc.reset()">Reset</button>
          </div>
          <p class="tiny">Tip: 2.6 w/s ≈ 156 wpm. Increase if you speak faster.</p>
        </div>
      </div>
    </section>

    <section class="grid">
      <article class="card">
        <div class="badge">Suggested Clips</div>
        <ol id="clips" class="mono"></ol>
      </article>
      <article class="card">
        <div class="badge">Selected → Captions (SRT)</div>
        <pre id="srt" class="mono">—</pre>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" onclick="sc.copy('srt')">Copy SRT</button>
          <button class="btn alt" onclick="sc.download()">Download .srt</button>
        </div>
      </article>
    </section>
  </main>

  <section class="container" aria-label="sponsored"><!-- Moecommunitycloud -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8387411349417007"
     data-ad-slot="6461821120"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script></section>

  <footer class="footer"><div class="container"><div>© <span id="year"></span> Moe Community Cloud — All rights reserved.</div></div></footer>
  <script>document.getElementById('year').textContent=new Date().getFullYear();</script>

  <script>
  (function(){
    const IMP=["do","try","stop","start","watch","learn","build","get","avoid","fix","make","turn","grab","save","win","prove","copy"];
    function scoreSentence(s){
      let score=0;
      if(/[0-9]/.test(s)) score+=2;
      if(/[!?]/.test(s)) score+=1;
      if(/\b(never|always|secret|mistake|risk|fail|proof|shortcut|hack|finally|because)\b/i.test(s)) score+=2;
      if(new RegExp("\\b("+IMP.join("|")+")\\b","i").test(s)) score+=1;
      if(s.length>160) score+=1; // meatier
      return score;
    }
    function toSRTText(text, wps, startSec){
      const words=text.split(/\s+/).filter(Boolean);
      const chunkLen=Math.max(8, Math.min(18, Math.floor(wps*3))); // 3s per caption
      let out=[], i=0, idx=1, t=startSec;
      function fmt(t){ const h=String(Math.floor(t/3600)).padStart(2,'0'); const m=String(Math.floor((t%3600)/60)).padStart(2,'0'); const s=String(Math.floor(t%60)).padStart(2,'0'); const ms='000'; return h+':'+m+':'+s+','+ms; }
      while(i<words.length){
        const seg=words.slice(i, i+chunkLen).join(' ');
        const dur= (seg.split(/\s+/).length / wps);
        const start=fmt(t), end=fmt(t+dur);
        out.push(idx++ + "\n" + start + " --> " + end + "\n" + seg + "\n");
        t += dur;
        i += chunkLen;
      }
      return out.join("\n");
    }
    function pickClips(words, minW, maxW){
      const text=words.join(' ');
      const sentences=text.split(/(?<=[\.!?])\s+/);
      const scored=sentences.map(s=>({s,score:scoreSentence(s)}));
      const clips=[];
      for(let i=0;i<scored.length;i++){ if(scored[i].score>=2){ 
        let w=0, txt=[]; let j=i;
        while(j<scored.length && w<maxW){ txt.push(scored[j].s); w += scored[j].s.split(/\s+/).length; j++; if(w>=minW) break; }
        if(w>=minW && w<=maxW) clips.push(txt.join(' ').trim());
      } }
      return clips.slice(0,8);
    }

    window.sc = {
      find(){
        const raw=document.getElementById('script').value.trim();
        if(!raw) return alert('Paste a transcript.');
        const wps=Number(document.getElementById('wps').value||2.6);
        const minS=Number(document.getElementById('minS').value||18);
        const maxS=Number(document.getElementById('maxS').value||42);
        const minW=Math.floor(minS*wps), maxW=Math.floor(maxS*wps);
        const words=raw.split(/\s+/).filter(Boolean);
        const clips=pickClips(words, minW, maxW);
        const list=document.getElementById('clips'); list.innerHTML='';
        clips.forEach((c,idx)=>{ 
          const li=document.createElement('li'); 
          const btn=document.createElement('button'); btn.className='btn'; btn.textContent='Use for SRT'; btn.onclick=function(){ document.getElementById('srt').textContent=toSRTText(c, wps, 0); };
          const p=document.createElement('p'); p.textContent=c;
          li.appendChild(btn); li.appendChild(p); list.appendChild(li);
        });
        if(!clips.length) alert('No good clips found—try lowering min seconds or raising wps.');
      },
      copy(id){ const t=document.getElementById(id).textContent||''; if(!t.trim()) return; navigator.clipboard.writeText(t).then(()=>alert('Copied')).catch(()=>{}); },
      download(){ const t=document.getElementById('srt').textContent||''; if(!t.trim()) return; const blob=new Blob([t],{type:'text/plain'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='shorts-crafter.srt'; a.click(); },
      reset(){ ['script'].forEach(id=>document.getElementById(id).value=''); document.getElementById('srt').textContent='—'; document.getElementById('clips').innerHTML=''; }
    };
  })();</script>
</body>
</html>
